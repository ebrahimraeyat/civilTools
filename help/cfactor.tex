\section{نرم افزار محاسبه ضریب زلزله (\lr{CFactor})}

\begin{figure}[H]
    \centering
    \includegraphics[scale=.6]{figures/cfactor}
    \caption{صفحه اصلی نرم افزار محاسبه ضریب زلزله}
\end{figure}
توسط این نرم افزار کاربر میتواند ضریب زلزله را مطابق با ویرایش چهارم آیین نامه ۲۸۰۰ بدست آورد. علاوه بر این امکانات دیگری هم در این نرم افزار گنجانده شده که انشالله به مرور زمان تکمیل خواهد شد. ویژگی های کلی

\begin{itemize}
    \item اعمال ضریب زلزله در فایل ایتبز
    \item محاسبه ضریب زلزله دریفت
    \item ساخت فایل طیف طراحی
    \item کنترل دریفت
    \item محاسبه خودکار دریفت
    \item بررسی نامنظمی پیچشی
    \item نمایش برش طبقات
    \item کنترل خودکار معیار مقاومت طبقه
\end{itemize}

تمامی این ویژگی ها بر روی ایتبزهای ورژن 2018 و 2019 کار میکند و در مورد ایتبز 2016 و پایینتر کارایی ندارند. زیرا از نسخه 2018 به بعد نرم افزار ایتبز، 
توابع 
\lr{API}
این نرم افزار پایدار شده اند و با کمترین مشکل کار خواهند کرد، گرچند که هنوز هم نواقص بسیاری دارد.
گاهی اوقات در بعضی از فایل ها این توابع به صورت ناقص اجرا میشود که باعث خرابی فایل میشود، 
\textcolor{red}{لذا همیشه قبل از استفاده از قابلیت های فوق، یک بک آپ از فایل خود بگیرید.}
\subsection{اعمال ضرایب زلزله در فایل ایتبز}
در حال حاضر امکانات مربوط به ایتبز برای ایتبزهای ۲۰۱۸ به بعد کار میکند. برای این منظور بعد از محاسبه ضریب زلزله و زمانیکه فایل ایتبز باز است، از منوی
$ETABS \rightarrow Export to Etabs$
برای اعمال ضریب زلزله در فایل ایتبز استفاده کنید. اگر سازه در حالت تحلیل شده قرار داشته باشد، نرم افزار به طور خودکار قفل آنرا باز میکند و سپس ضرایب زلزله را در فایل ایتبز اعمال میکند.

\begin{itemize}
    \item نرم افزار به طور خودکار جهات \lr{X, Y} و همچنین زلزله های دریفت را تشخیص میدهد.
    \item گاهی اوقات در بعضی از فایلها این کار به درستی صورت نمیگیرد. اگر بعد از اعمال ضریب زلزله، نتوانستید فایل را اجرا کنید، نگران نباشید. فایل را بسته و دوباره باز کنید. هنوز به طور دقیق علت این ایراد را متوجه نشده ام، در صورت برخورد با این مشکل فایل را برای من ارسال کنید تا مشکل اینگونه فایل ها را بررسی کنم.
\end{itemize}

\subsection{محاسبه ضریب زلزله دریفت}
با توجه به زمان تناوب های تحلیلی سازه که توسط کاربر وارد میشود، نرم افزار اقدام به محاسبه ضریب زلزله دریفت مینماید. 

\subsection{ساخت فایل طیف طراحی}
فایلهای آماده زیادی برای وارد کردن طیف طراحی در نرم افزار ایتبز وجود دارد، ولی اکثر آنها تنها چند پارامتر را مدنظر قرار میدهند مثل نوع خاک و شتاب مبنای طرح، ولی با توجه به گستردگی سیستم های باربر جانبی که ضریب رفتارهای مختلفی دارند،
ساخت همه حالتهای طیف عملا غیرممکن و غیرضروری است. ولی نرم افزار ضریب زلزله یک طیف مختص به سازه انتخاب شده برای شما ایجاد میکند که دیگر نیاز به اعمال هیچ گونه ضریبی در موقع ساخت
\lr{Load Case}
دینامیکی  در نرم افزار ایتبز وجود ندارد.
کافی است که طیف ساخته شده را مطابق شکل 
\ref{pic:spec_scale}
بدون اعمال هیچ گونه ضریب در نرم افزار ایتبز وارد کنید.

\begin{figure}[H]
    \centering
    \includegraphics[scale=.7]{figures/spec_scale.png}
    \caption{نحوه ساخت حالت بار دینامیکی بدون نیاز به اعمال ضریب}
    \label{pic:spec_scale}
\end{figure}

همچنین در صورتی که سیستم های جهت 
\lr{X, Y}
متفاوت باشند نرم افزار به طور خودکار برای هر جهت یک طیف مجزا درست میکند. سپس میتوانید فایل آماده شده را مطابق شکل
\ref{pic:spec}
به نرم افزار معرفی نمایید.

\begin{figure}[H]
    \centering
    \includegraphics[scale=.6]{figures/spec}
    \caption{مراحل وارد کردن طیف به نرم افزار ایتبز}
    \label{pic:spec}
\end{figure}

\subsection{کنترل دریفت}
با استفاده از گزینه کنترل دریفت شما میتوانید با توجه به سیستم های باربر جانبی که انتخاب نموده اید و همچنین مشخص کردن تعداد طبقات سازه مقدار دریفت موجود و دریفت مجاز را برای هر راستا مشاهده کنید.
نرم افزار به طور خودکار زلزله های دریفت را تشخیص میدهد و مقادیر دریفت را برای آنها نمایش میدهد.  اگر پیغامی دریافت کردید که باید یک حالت بار یا همان 
\lr{Load Case}
انتخاب کنید، نشان دهنده این است که شما هیچ زلزله دریفتی تعریف نکرده اید.
با سرچ در کادر 
\lr{Filter}
با توجه به ستون انتخاب شده در گزینه 
\lr{By Column}
، میتوانید خروجی جدول را برای مشاهده بهتر فیلتر نمایید مثلا اگر مطابق شکل
\ref{pic:drift}
گزینه ستون را
\lr{OutputCase}
انتخاب کنید، با تایپ 
\lr{dri}
فقط دریفت هایی که در نام آنها \lr{dri} باشد نمایش داده میشوند.

\begin{figure}[H]
   \centering
   \includegraphics[scale=0.7]{figures/drift}
   \caption{فیلتر کردن خروجی جدول دریفت با انتخاب ستون مربوطه و تایپ  مقداری از محتوای ستون}
   \label{pic:drift}
\end{figure}

همچنین با کلیک روی عنوان ستونها نیز میتوانید مطابق شکل 
\ref{pic:drift_filter}
 آنها را فیلتر نمایید. فیلتر فقط روی یک ستون اعمال میشود و نمیتوان همزمان فیلتر روی چند ستون اعمال نمود، یعنی با فیلتر نمودن یک ستون، فیلتر مابقی ستونها بی اثر میشود.
 
 
\begin{figure}[H]
    \centering
    \includegraphics[scale=0.7]{figures/drift_filter}
    \caption{فیلتر کردن خروجی جدول دریفت با کلیک روی نام ستون ها}
    \label{pic:drift_filter}
\end{figure}


\subsection{محاسبه خودکار دریفت}
قبل از اجرای این دستور، کاربر باید تعداد طبقات سازه و همچنین سیستم های مقاوم باربر جانبی را به درستی انتخاب کند، زیرا نرم افزار مقادیر مجاز دریفت را بر اساس تعداد طبقات و مقادیر 
\lr{cd}
سیستم های انتخابی محاسبه میکند.

با کلیک روی گزینه 
\lr{Automatic Drift}
مراحل زیر انجام میگیرد:
\begin{itemize}
    \item ابتدا یک کپی از فایل اصلی به نام \lr{T.EDB} در محل فایل اصلی ساخته میشود.
    \item در این فایل ضرایب سختی خمشی تیرها و ستونها به ترتیب $0.5$ و $1.0$ قرار داده میشود.
    \item سازه آنالیز شده و مقادیر زمان تناوب تحلیلی در راستای \lr{x, y} استخراج میشود.
    \item ضریب زلزله و ضریب زلزله دریفت بر مبنای زمان تناوب تحلیلی مرحله قبل مجددا محاسبه میشود.
    \item سپس جدول دریفت بر اساس تعداد طبقات و سیستم های انتخابی کاربر مطابق شکل \ref{pic:drift} به نمایش در می آید.
\end{itemize}

\subsection{بررسی نامنظمی پیچشی}
از طریق منوی 
$ETABS \rightarrow Rho Factor \rightarrow Show Torsion$
میتوانید مقادیر پیچش طبقات را به صورت یک جدول مشاهده کنید. نرم افزار به طور خودکار نتایج نامعتبر را حذف میکند، به این معنی که زمانیکه نیرو در راستای 
\lr{x}
وارد میشود، مقادیر دریفت در راستای \lr{y} را حذف میکند و همین طور برعکس. این بدین دلیل است که گاهی اوقات مقادیر دریفت در راستایی که نیرو وارد نمیشود
بسیار کم است و زمانیکه مقادیر دریفت حداکثر و متوسط که اعداد کمی هستند در ایتبز بر هم تقسیم میشوند،‌ نسبت بزرگی میدهند مثل عدد ۳ یا ۴ که کاربر باید در ایتبز این
مقادیر را از نتایج حذف کند. نرم افزار به طور خودکار این نتایج را نمایش نمیدهد. در نهایت جدول پیچش مطابقه شکل 
\ref{pic:torsion}
با رنگ بندی نمایش داده میشود:

\begin{figure}[H]
    \centering
    \includegraphics[scale=0.7]{figures/torsion_table}
    \caption{نمایش پیچش طبقات}
    \label{pic:torsion}
\end{figure}

همچنین با کلیک بر روی هر ردیف از جدول، مطابق شکل 
\ref{pic:torsion_show_node}
نقطه ای که کنترل پیچش روی آن صورت گرفته است به نمایش در می آید و کاربر میتواند کنترل کامل روی نقاطی
که نرم افزار ایتبز انتخاب کرده است داشته باشد.

\begin{figure}[H]
    \centering
    \includegraphics[scale=0.4]{figures/torsion_show_node}
    \caption{نمایش نقطه مورد نظر با کلیک روی ردیف های جدول}
    \label{pic:torsion_show_node}
\end{figure}

\subsection{نمایش برش طبقات}
یکی از کنترل هایی که در زمان محاسبه ضریب نامعینی مورد نیاز است، طبقاتی است که برش در آنها از $.35$ 
برش پایه تجاوز میکند. با انتخاب این گزینه از منوی 
$ETABS \rightarrow Rho Factor \rightarrow Story Forces$
جدول مقادیر برش طبقات به همراه رنگ بندی مناسب مطابق شکل 
\ref{pic:story_forces}
نمایش داده میشود. در این جدول نسبت نیروها در دو راستای
$x, y$
به صورت مجزا نمایش داده میشود و طبقاتی که به رنگ سبز هستند نیاز به کنترل ضابطه مربوطه را ندارند.

\begin{figure}[H]
    \centering
    \includegraphics[scale=0.7]{figures/story_forces}
    \caption{نیروی برش طبقات و نسبت آنها به برش پایه}
    \label{pic:story_forces}
\end{figure}

نرم افزار برای تشکیل این جدول به طور خودکار یک زلزله  از زلزله های جهت 
$x$ و 
همینطور یک زلزله  از زلزله های جهت $y$
را میخواند، که میتواند با یا بدون خروج از مرکزیت باشد، زیرا برش طبقه ارتباطی به خروج از مرکزیت نیرو ندارد. در این موارد زلزله های دریفت به طور خودکار نادیده گرفته میشوند.


\subsection{کنترل خودکار معیار مقاومت طبقه}
یکی از مراحل دیگر در کنترل ضریب نامعینی کنترل مربوط به معیار مقاومت طبقه است. مراحل کار بدین صورت است:

\begin{itemize}
    \item ابتدا کاربر در نرم افزار ایتبز، تیری را که بیشترین اثر کاهش روی مقاومت طبقه دارد را انتخاب میکند. برای این کار میتواند از مقدار انرژی داخلی عضو استفاده کنید.
    \item سپس کاربر از منوی $ETABS \rightarrow Rho Factor \rightarrow Weakness$ دستور را اجرا میکند.
    \item در صورتیکه سازه آنالیز و طراحی نشده باشد، نرم افزار سازه را آنالیز و طراحی میکند.
    \item سپس نتایج تیر و ستون طبقه ای که عضو انتخاب شده در آن قرار دارد استخراج میشود. در این مرحله نسبت تنش ستونها در ایستگاه حداکثر و مقادیر میلگردهای بالا و پایین و همینطور میلگرد برشی تیرها در ایستگاه های مختلف برداشت میشود.
    \item سپس یک کپی از فایل اصلی با نام \lr{weakness.EDB} در محل فایل اصلی ساخته میشود.
    \item در این فایل تیر انتخاب شده توسط کاربر دو سر مفصل میشود (خمش ابتدا و انتها و پیچش یک سمت تیر آزاد میشود).
    \item سپس ضرایب زلزله به صورت خودکار در مقدار$0.67$ ضرب میشوند.
    \item سازه تضعیف شده آنالیز و طراحی میشود.
    \item همانند فایل اصلی مقادیر نسبت تنش ستونها و مساحت میلگردهای طبقه مورد نظر برداشت میشود.
    \item سپس جدول نسبت تنش ستونها و مقادیر میلگردها مطابق شکل های \ref{pic:weakness_column} و \ref{pic:weakness_beam} به نمایش در می آیند.
\end{itemize}

بهتر است جداول نمایش داده شده را با استفاده از آیکن خروجی به اکسل، ذخیره کنید. چون برای نمایش مجدد نیاز به انجام مجدد فرایندهای فوق می باشد.

\begin{figure}
    \centering
    \includegraphics[scale=.7]{figures/weakness_column}
    \caption{جدول نسبت تنش ستونها در سازه اصلی و سازه تضعیف شده}
    \label{pic:weakness_column}
\end{figure}

\begin{figure}
    \centering
    \includegraphics[scale=.6]{figures/weakness_beam}
    \caption{جدول مساحت میلگرد تیرها در سازه اصلی و سازه تضعیف شده}
    \label{pic:weakness_beam}
\end{figure}